{"version":3,"sources":["ng-giphy.js"],"names":["ngGiphyConfig","giphyConfigProvider","setKey","findGiphy","scope","q","rating","controller","findGiphyController","controllerAs","bindToController","templateUrl","giphy","vm","this","find","then","res","giphysrc","findGiphyById","id","findGiphyByIdController","findById","findRandGiphy","findRandGiphyController","random","giphyService","$http","giphyConfig","query","constructor","Array","join","get","url","data","images","original","replace","image_url","baseUrl","key","templateCache","$templateCache","put","value","$get","angular","module","directive","factory","provider","config","run","$inject"],"mappings":"CAAA,WACA,YAiBA,SAAAA,GAAAC,GACAA,EAAAC,OAAA,iBAMA,QAAAC,KACA,OACAC,OACAC,EAAA,UACAC,OAAA,KAEAC,WAAAC,EACAC,aAAA,KACAC,kBAAA,EACAC,YAAA,oBAMA,QAAAH,GAAAI,GAEA,GAAAC,GAAAC,IAEAF,GAAAG,KAAAF,EAAAR,GAAAW,KAAA,SAAAC,GACAJ,EAAAK,SAAAD,IAQA,QAAAE,KACA,OACAf,OACAgB,GAAA,WACAd,OAAA,KAEAC,WAAAc,EACAZ,aAAA,KACAC,kBAAA,EACAC,YAAA,oBAMA,QAAAU,GAAAT,GAEA,GAAAC,GAAAC,IAEAF,GAAAU,SAAAT,EAAAO,IAAAJ,KAAA,SAAAC,GACAJ,EAAAK,SAAAD,IAOA,QAAAM,KACA,OACAnB,OACAC,EAAA,UACAC,OAAA,KAEAC,WAAAiB,EACAf,aAAA,KACAC,kBAAA,EACAC,YAAA,oBAMA,QAAAa,GAAAZ,GAEA,GAAAC,GAAAC,IAEAF,GAAAa,OAAAZ,EAAAR,GAAAW,KAAA,SAAAC,GACAJ,EAAAK,SAAAD,IAQA,QAAAS,GAAAC,EAAAC,GAuBA,QAAAb,GAAAV,GACA,GAAAwB,GAAAxB,EAAAyB,cAAAC,MAAA1B,EAAA2B,KAAA,KAAA3B,CAEA,OAAAsB,GAAAM,IAAAC,EAAAnB,KAAA,MAAAc,GAAAb,KAAA,SAAAC,GACA,MAAAA,GAAAkB,KAAAA,KAAA,GAAAC,OAAAC,SAAAH,MAUA,QAAAZ,GAAAF,GACA,MAAAO,GAAAM,IAAAC,EAAAZ,SAAAgB,QAAA,KAAAlB,IAAAJ,KAAA,SAAAC,GACA,MAAAA,GAAAkB,KAAAA,KAAAC,OAAAC,SAAAH,MAUA,QAAAT,GAAApB,GACA,GAAAwB,GAAAxB,EAAAyB,cAAAC,MAAA1B,EAAA2B,KAAA,KAAA3B,CACA,OAAAsB,GAAAM,IAAAC,EAAAT,OAAA,QAAAI,GAAAb,KAAA,SAAAC,GACA,MAAAA,GAAAkB,KAAAA,KAAAI,YAlDA,GAAAC,GAAA,+BAEAN,GACAT,OAAAe,EAAA,mBAAAZ,EAAAa,IACA1B,KAAAyB,EAAA,mBAAAZ,EAAAa,IACAnB,SAAAkB,EAAA,eAAAZ,EAAAa,IAIA,QACA1B,KAAAA,EACAO,SAAAA,EACAG,OAAAA,GA8CA,QAAAiB,GAAAC,GACAA,EAAAC,IAAA,mBAAA,oCAIA,QAAAhB,KAEAd,KAAAZ,OAAA,SAAA2C,GACA/B,KAAA2B,IAAAI,GAGA/B,KAAAgC,KAAA,WACA,MAAAhC,OAjLAiC,QAAAC,OAAA,eAEAC,UAAA,YAAA9C,GACA8C,UAAA,UAAA9B,GACA8B,UAAA,YAAA1B,GAEA2B,QAAA,QAAAxB,GACAyB,SAAA,cAAAvB,GAEAwB,OAAApD,GACAqD,IAAAX,GAGA1C,EAAAsD,SAAA,uBAsBA9C,EAAA8C,SAAA,SA4BAjC,EAAAiC,SAAA,SA2BA9B,EAAA8B,SAAA,SAaA5B,EAAA4B,SAAA,QAAA,eA4DAZ,EAAAY,SAAA","file":"ng-giphy.min.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular.module('ng-giphy', [])\n\n    .directive('giphyFind',  findGiphy)\n    .directive('giphyId',    findGiphyById)\n    .directive('giphyRand',  findRandGiphy)\n\n    .factory('giphy',        giphyService)\n    .provider('giphyConfig', giphyConfig)\n\n    .config(ngGiphyConfig)\n    .run(templateCache);\n\n  // configure the provider to use the beta key\n  ngGiphyConfig.$inject = ['giphyConfigProvider'];\n  /* @ngInject */\n  function ngGiphyConfig(giphyConfigProvider) {\n    giphyConfigProvider.setKey('dc6zaTOxFJmzC');\n  }\n\n  /**\n   * Directive: find gif by tag\n   */\n  function findGiphy() {\n    return {\n      scope: {\n        q     : '=giphyQ',\n        rating: '='\n      },\n      controller: findGiphyController,\n      controllerAs: 'vm',\n      bindToController: true,\n      templateUrl: 'imgTemplate.html'\n    };\n  }\n\n  findGiphyController.$inject = ['giphy'];\n  /* @ngInject */\n  function findGiphyController(giphy) {\n    /* jshint validthis: true */\n    var vm = this;\n\n    giphy.find(vm.q).then(function (res) {\n      vm.giphysrc = res;\n    });\n  }\n\n\n  /**\n   * Directive: find gif by id\n   */\n  function findGiphyById() {\n    return {\n      scope: {\n        id    : '=giphyId',\n        rating: '='\n      },\n      controller: findGiphyByIdController,\n      controllerAs: 'vm',\n      bindToController: true,\n      templateUrl: 'imgTemplate.html'\n    };\n  }\n\n  findGiphyByIdController.$inject = ['giphy'];\n  /* @ngInject */\n  function findGiphyByIdController(giphy) {\n    /* jshint validthis: true */\n    var vm = this;\n\n    giphy.findById(vm.id).then(function (res) {\n      vm.giphysrc = res;\n    });\n  }\n\n  /**\n   * Directive: find random gif by tag\n   */\n  function findRandGiphy() {\n    return {\n      scope: {\n        q     : '=giphyQ',\n        rating: '='\n      },\n      controller: findRandGiphyController,\n      controllerAs: 'vm',\n      bindToController: true,\n      templateUrl: 'imgTemplate.html'\n    };\n  }\n\n  findRandGiphyController.$inject = ['giphy'];\n  /* @ngInject */\n  function findRandGiphyController(giphy) {\n    /* jshint validthis: true */\n    var vm = this;\n\n    giphy.random(vm.q).then(function (res) {\n      vm.giphysrc = res;\n    });\n  }\n\n\n  // services to interact with Giphy API endpoints\n  giphyService.$inject = ['$http', 'giphyConfig'];\n  /* @ngInject */\n  function giphyService($http, giphyConfig) {\n\n    var baseUrl = 'http://api.giphy.com/v1/gifs';\n\n    var url = {\n      random   : baseUrl + '/random?api_key=' + giphyConfig.key,\n      find     : baseUrl + '/search?api_key=' + giphyConfig.key,\n      findById : baseUrl + '/%s?api_key='     + giphyConfig.key\n    };\n\n    // expose the service API\n    return {\n      find     : find,\n      findById : findById,\n      random   : random\n    };\n\n    /**\n     * Gets a gif url searching by tag\n     *\n     * @param {string} query\n     * @return {string} gif url\n     */\n    function find(q){\n      var query = q.constructor === Array ? q.join('+') : q;\n\n      return $http.get(url.find + '&q=' + query).then(function (res) {\n        return res.data.data[0].images.original.url;\n      });\n    }\n\n   /**\n    * Gets a gif url searching by id\n    *\n    * @param {string} gif id\n    * @return {string} gif url\n    */\n    function findById(id){\n      return $http.get(url.findById.replace('%s', id)).then(function (res) {\n        return res.data.data.images.original.url;\n      });\n    }\n\n    /**\n     * Gets a random gif url searching by tag\n     *\n     * @param {string} query\n     * @return {string} gif url\n     */\n    function random(q){\n      var query = q.constructor === Array ? q.join('+') : q;\n      return $http.get(url.random + '&tag=' + query).then(function (res) {\n        return res.data.data.image_url;\n      });\n    }\n  }\n\n\n  templateCache.$inject = ['$templateCache'];\n  /* @ngInject */\n  function templateCache($templateCache) {\n    $templateCache.put('imgTemplate.html', '<img ng-src=\"{{ vm.giphysrc }}\">');\n  }\n\n  // giphy API key provider\n  function giphyConfig() {\n    /* jshint validthis: true */\n    this.setKey = function(value) {\n      this.key = value;\n    };\n\n    this.$get = function() {\n      return this;\n    };\n  }\n\n})();\n"],"sourceRoot":"/source/"}